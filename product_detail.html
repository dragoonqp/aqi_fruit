<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title></title>
		<link rel="stylesheet" href="css/common.css" type='text/css'>
		<link rel="stylesheet" href="css/product_detail_body.css" type="text/css">
		<link rel="stylesheet" href="css/iconcss/iconfont.css">
	</head>
	<body onload="initialize()">
		<header>
			<!-- 头部登录区 -->
			<div id='title'>
				<div class='content'>
					<span>您好，欢迎来到阿七果园子！</span>
					<ul class='right mycenter'>
						<li><a href='user_login.html' title='登录账户'>[登录]</a>&nbsp;</li>
						<li><a href='user_register.html' title='注册新用户'>[注册有惊喜]</a></li>
						<li><a href='' title='个人中心'>我的果园</a></li>
						<li><a href='' title='移动端'>手机果园</a></li>
						<li>400-720-0770</li>
					</ul>
				</div>
			</div>
			<div id='searchbardiv'>
				<div class='content'>
					<!-- logo图片 -->
					<h3 class='logo'><a href="index.html" title='阿七果园'></a></h3>
					<h4 class='logo'><a href="index.html" title='阿七果园'></a></h4>
					<!-- 配送 -->
					<div id="delivery">
						
					</div>
					<!-- 搜索框及搜索热点 -->
					<div id="searchbar">
						<span>搜索热点:</span>
						<ul id='hot'>
							<li></li>
							<li></li>
							<li></li>
							<li></li>
							<li></li>
							<li></li>
						</ul>
						<div id="searchBtn">搜索</div>
						<input type="text" id='search'>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
		</header>
		
		<nav>
			<div class='content'>
				<ul class="nav">
					<li id='allproducts' ><a href="">全部商品</a>
						<ul class='subnav'>
							<li><a href="">所有鲜果</a></li>
							<li><a href="">进口鲜果</a></li>
							<li><a href="">国产鲜果</a></li>
							<li><a href="">休闲食品</a></li>
							<li><a href="">礼盒花篮</a></li>
							<li><a href="">消费卡券</a></li>
							<li><a href="">宝贝水果</a></li>
							<li><a href="">孕妇水果</a></li>
							<li><a href="">老人水果</a></li>
							<li><a href="">其他</a></li>
						</ul>
					</li>
					<li><a href="">首页</a></li>
					<li><a href="">进口鲜果</a></li>
					<li><a href="">国产鲜果</a></li>
					<li><a href="">在线充值</a></li>
					<li><a href="">团购配送</a></li>
					<li><a href="">其他</a></li>
				</ul>
				<div id='shopcar'><a href=""><i></i> 购物车</a></div>
			</div>
			<div class="clearfix"></div>
		</nav>
		<section>
			<div class="content productdetail">
				<div class="asidelink">
					<div class="head">猜你喜欢</div>
					<div class="linkcontainer">
						<ul class="linklist">
							<li>
								<a href="">
									<div class="likepic"><img src="image/fruit/fruit_25.jpg" alt=""></div>
									<div>
										<p class=liketitle>进口车厘子</p>
										<p >原价:</p>
										<p class=likeoldprice>28.00</p>
										<p>促销价:</p>
										<p class=likenewprice>20.00</p>
									</div>
								</a>
							</li>
							<li><a href="">
								<div class="likepic"><img src="image/fruit/fruit_25.jpg" alt=""></div>
								<div>
									<p class=liketitle>进口车厘子</p>
									<p >原价:</p>
									<p class=likeoldprice>28.00</p>
									<p>促销价:</p>
									<p class=likenewprice>20.00</p>
								</div>
							</a></li>
							<li><a href="">
								<div class="likepic"><img src="image/fruit/fruit_25.jpg" alt=""></div>
								<div>
									<p class=liketitle>进口车厘子</p>
									<p >原价:</p>
									<p class=likeoldprice>28.00</p>
									<p>促销价:</p>
									<p class=likenewprice>20.00</p>
								</div>
							</a></li>
							<li><a href="">
								<div class="likepic"><img src="image/fruit/fruit_25.jpg" alt=""></div>
								<div>
									<p class=liketitle>进口车厘子</p>
									<p >原价:</p>
									<p class=likeoldprice>28.00</p>
									<p>促销价:</p>
									<p class=likenewprice>20.00</p>
								</div>
							</a></li>
							<li><a href="">
								<div class="likepic"><img src="image/fruit/fruit_25.jpg" alt=""></div>
								<div>
									<p class=liketitle>进口车厘子</p>
									<p >原价:</p>
									<p class=likeoldprice>28.00</p>
									<p>促销价:</p>
									<p class=likenewprice>20.00</p>
								</div>
							</a></li>
						</ul>
					</div>
				</div>
				<div class="body">
					<p>
						<span  class="fname">name</span><i class="iconfont icon-qrcode-1-copy"></i>
					</p>
					<div class="buyarea">
						<div class="picholder"></div>
						<div class="price">
							<h4 class="ftitle"></h4>
							<p><span class="pricetitle">原价 :</span><del class='oldprice'></del></p>
							<p><span class="pricetitle">促销价 :</span><span class="newprice"></span></p>
							<p><span class="pricetitle">包装规格 :</span><span class="packweight"></span></p>
							<p><span class="pricetitle">赠送积分</span> <span class="bonuspoints">0</span></p>
							<p><span class="pricetitle">:</span><span class=""></span></p>
							<div class="buycount"><span class="pricetitle">购买数量 :</span>
								<div class="countcontrol">
									<input class="buycounttext" type="text" value=1 >
									<div>
										<a href="javascript:buycountadd(1)" class="add">
											<div class="addicon"></div>
										</a>
										<a href="javascript:buycountadd(-1)" class="reduce">
											<div class="reduceicon"></div>
										</a>
									</div>
								</div>
							</div>
							<div class="buybtn">
								<a href="" class="addtocar">加入购物车</a>
								<a href="" class="buynow">立即购买</a>
							</div>
							<p class="service"><span class="pricetitle">产品保证:</span></p>
						</div>
					</div>
					<p class="collection">
						<a href=""> <i class="iconfont icon-shoucang"></i>收藏</a><b>|</b>
						<a href=""> <i class="iconfont icon-fenxiang"></i>分享</a>
					</p>
					<div class="changeP">
						<a href="" class="prevproduct">上一个</a>
						<a href="" class="nextproduct">下一个</a>
					</div>
					<div class="productspec">
						<a  class="spec active" onclick="activea(this)">产品详情</a>
						<a  class="comment" onclick="activea(this)">产品评论</a>
						<a  class="dealcount" onclick="activea(this )">销售记录</a>
						<div class="specdiv">
							<div id="spec" class="actived">
								<table>
									<tr>
										<td>水果名称:</td><td class="specname value"></td>
										<td>水果产地:</td><td class="oCountry value"></td>
									</tr>
									<tr>
										<td>是否进口:</td><td class="isImport value"></td>
										<td>上架时间:</td><td class="shelfTime value"></td>
									</tr>
									<tr><td>储存方法:</td><td class="storage value">避光存储</td>
										<td>包装规格:</td><td class="packWeight value"></td>
									</tr>
									<tr>
										<td>产品分类:</td><td class="fclass value"></td>
										<td>产品编号:</td><td class="fId value"></td>
									</tr>
										<td>特性:</td><td class="charactor value">无</td>
										<td>其他:</td><td class="other value">无</td>
									</tr>
								</table>

							</div>
							<div id="comment">
								<div class="commentsummary">
									<div class="left"></div>
									<div class="right"></div>
								</div>
							</div>
							<div id="dealcount">33</div>
						</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
			
		</section>

		<footer>
			<div class="content">
				<div class="ltext">
					<div>
						<h3>新手指南</h3>
						<ul>
							<li>购物流程</li>
							<li>用户注册</li>
							<li>会员积分</li>
							<li>联系客服</li>
						</ul>
					</div>
					<div>
						<h3>付款方式</h3>
						<ul>
							<li>货到付款</li>
							<li>在线支付</li>
							<li>在线充值</li>
						</ul>
					</div>
					<div>
						<h3>配送服务</h3>
						<ul>
							<li>配送运费</li>
							<li>配送范围</li>
							<li>配送时间</li>
							<li>配送须知</li>
						</ul>
					</div>
					<div>
						<h3>售后服务</h3>
						<ul>
							<li>关于商品的退换</li>
							<li>关于退换的处理</li>
							<li>关于退款</li>
							<li>投诉建议</li>
						</ul>
					</div>
					<div>
						<h3>关于我们</h3>
						<ul>
							<li>关于阿七果园子</li>
							<li>联系我们</li>
							<li>业务合作</li>
							<li>招贤纳士</li>
						</ul>
					</div>
				</div>
				<div class="rimg">
					<img src="../image/1_36.png" alt="">
					<img src="../image/footercontact_38.png" alt="">
					<p>客服电话:0571-83539906</p>
					<p>地址:浙江省杭州市萧山区</p>
				</div>
			</div>
		</footer>
		<script>
			//定义选项卡切换样式函数。
			function activea(obj){
                var aFaEle = document.getElementsByClassName("productspec")[0];
                var aList = aFaEle.getElementsByTagName("a");
                for(var i=0;i<aList.length;i++){
                    aList[i].classList.remove("active");
                }
                obj.classList.add("active");
				var activeClass=obj.getAttribute("class")
				var actdiv=document.getElementsByClassName("specdiv")[0].getElementsByTagName("div")
				for(var j=0;j<actdiv.length;j++){
                    actdiv[j].classList.remove("actived");
                    if(activeClass.indexOf(actdiv[j].getAttribute("id"))>-1){
				        actdiv[j].classList.add("actived");
					}
				}
			}

			function getdetail(){
                var urlParams = new URLSearchParams(location.search);
                var fid=urlParams.get('fid');
                var xhr= new XMLHttpRequest();
                if(fid){
                    xhr.onreadystatechange=function(){
                        if(xhr.readyState==4& xhr.status==200){
                            var result=JSON.parse(xhr.responseText);
                            //console.log(result);
                            //产品购买区
                            var fname=document.getElementsByClassName("fname")[0];
                            var ftitle=document.getElementsByClassName("ftitle")[0];
                            var picholder=document.getElementsByClassName("picholder")[0];
                            var oldprice=document.getElementsByClassName("oldprice")[0];
                            var newprice=document.getElementsByClassName("newprice")[0];
                            var packweight=document.getElementsByClassName("packweight")[0];
                            var bonuspoints=document.getElementsByClassName("bonuspoints")[0];

                            fname.innerHTML=result[0].pName;
                            ftitle.innerHTML=result[0].title+'<br>'+result[0].fdesc;
                            picholder.innerHTML='<img src="'+result[0].spic+'">';
                            oldprice.innerHTML='￥'+result[0].oUnitPrice.toFixed(2)+'/箱';
                            newprice.innerHTML='￥'+result[0].nUnitPrice.toFixed(2)+'/箱';
                            packweight.innerHTML=result[0].packWeight+'斤/箱';

							//产品详情区
                            var specname=document.getElementsByClassName("specname")[0];
                            var oCountry=document.getElementsByClassName("oCountry")[0];
                            var isImport=document.getElementsByClassName("isImport")[0];
                            var shelfTime=document.getElementsByClassName("shelfTime")[0];
                            var packWeight=document.getElementsByClassName("packWeight")[0];
                            var fclass=document.getElementsByClassName("fclass")[0];
                            var fId=document.getElementsByClassName("fId")[0];


                            specname.innerHTML=result[0].pName;
                            oCountry.innerHTML=result[0].oCountry;
                            isImport.innerHTML= (result[0].oCountry=="中国"?'国产':'进口');
                            shelfTime.innerHTML='';
                            packWeight.innerHTML=result[0].packWeight+'斤/箱';
                            fclass.innerHTML=result[0].fruitClass;
                            fId.innerHTML=result[0].fId;
                        }
                    }
                    xhr.open('get','/product/product_detail?fId='+fid,true)
                    xhr.send(null);
                }
			}
			var reduceBtn = document.getElementsByClassName("reduce")[0];


			function buycountadd(num){
			    var buycountvalue = document.getElementsByClassName("buycounttext")[0];
			    buycountvalue.value = Number(buycountvalue.value)+num;
			    if(buycountvalue.value<=1){
					reduceBtn.classList.add("disable");
				}else{
                    reduceBtn.classList.remove("disable");
				}
			}

			function initialize(){
				getdetail();
				reduceBtn.classList.add("disable");
			}
		</script>
	</body>
</html>